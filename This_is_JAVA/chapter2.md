# Chapter2. 변수와 타입

## 2-1. 변수(Variable)

### 2-1-1. 변수란?

- 변수란, 하나의 값을 저장할 수 있는 메모리 공간이다. 
- 변수에는 한 가지 타입의 값만 저장할 수 있다. 



 **상수** : **값이 변하지 않는 변수**



### 2-1-2. 변수의 선언

- 변수 선언은 어떤 타입의 데이터를 저장할 것인지 그리고 변수 이름이 무엇인지를 결정한다. 
- 변수 이름은 메모리 주소에 붙여진 이름이다. 변수 이름은 자바 언어에서 정한 명명 규칙을 따라야 한다.

| 작성규칙                                                     | 예                                                           |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 첫 번째 글자는 문자이거나 ' $ ', ' _ ' 이어야 하고 숫자로 시작할 수 없다. | **가능**: price, $price, _companyName  불가능: 1v, @speed, #value |
| 영어 대소문자가 구분된다.(필수)                              | firstname과 firstName은 다른 변수                            |
| 첫 문자는 영어 소문자로 시작하되, 다른 다언가 붙을 경우 첫 문자를 대문자로 한다.(관례) 카멜 표기법**(낙타등과비슷하게생김)** | maxSpeed, firstName, carBodyColor                            |
| 문자 수(길이)의 제한은 없다.                                 |                                                              |
| 자바 예약어는 사용할 수 없다.(필수)                          |                                                              |



### 2-1-3. 변수의 사용

- 변수를 사용한다는 것은 변수에 값을 저장하고 읽는 행위를 말한다. 변수에 값을 저장하는 방법과 변수에 저장된 값을 읽는 방법에 대해 알아보기로 하자.

#### 변수값 저장

- 변수에 값을 저장할 대에는 대입 연산자(=)를 사용한다. 자바 언어에서는 오측의 값을 좌측 변수에 저장한다는 의미를 갖는다.
- 변수를 선언하고 처음 값을 저장할 경우, 기러한 값을 **초기값**이라고 한다. 그리고 **변수에 초기값을 주는 행위를 변수의 초기화라고 한다.**

```java
int score;   //변수 선언
score = 90;  //값 저장(초기화)
```

- 변수의 초기값은 코드에서 직접 입력하는 경우가 많은데, **소스 코드 내에서 직접 입력된 값을 리터럴(literal)**이라고 부른다. 

##### 1) 정수 리터럴

- 소수점이 없는 정수 리터럴은 10진수로 간주한다.
-  0으로 시작되는 리터럴은 8진수로 간주한다.
- 0x 또는 0X로 시작하고 0~9 숫자나 A, B, C, D, E, F 또는 a, b, c, d, e, f로 구성된 리터럴은 16진수로 간주한다.
- 정수 리터럴을 저장할 수 있는 타입은 byte, char, short, int, long이 있다. 

##### 2) 실수 리터럴

- 소수점이 있는 리터럴은 10진수로 간주한다.
- 대문자 E 또는 소문자 e가 있는 리터럴은 10진수 지수와 가수로 간주한다. 
- 실수 리터럴을 저장할 수 있는 타입은 float, double이 있다.

##### 3) 문자 리터럴

- 작은 따옴표( '  ' )로 묶은 텍스트는 하나의 문자 리터럴로 간주한다.
- 역슬래쉬( \ )가 붙은 문자 리터럴은 이스케이프(escape)문자라고도 하는데, 특수한 용도로 사용된다. 

| 이스케이프 문자 | 용도                       | 유니코드 |
| --------------- | -------------------------- | -------- |
| ' \t '          | 수평 탭                    |          |
| ' \n '          | 줄 바꿈                    |          |
| ' \r '          | 리턴                       |          |
| ' \\" '         | " (큰 따옴표)              |          |
| ' \\' '         | ' (작은 따옴표)            |          |
| ' \\ '          | 역슬래쉬( \ )              |          |
| ' \u 16진수 '   | 16진수에 해당하는 유니코드 |          |

- **문자 리터럴을 저장할 수 있는 타입은 char 하나뿐이다.**

##### 4) 문자열 리터럴

- 큰따옴표( " " )로 묶은 텍스트는 문자열 리터럴로 간주한다. 큰따옴표 안에는 텍스트가 없어도 문자열 리터럴로 간주된다. 문자열 리터럴 내부에서도 이스케이프 문자를 사용할 수 있다.

  ```java
  "대한민국"
  "탭 만큼 이동 \t 합니다."
  "한줄 내려 쓰기 \n 합니다."
  ```

-  **문자열 리터럴을 저장할 수 있는 타입은 String 하나뿐이다.**

##### 5) 논리 리터럴

- true와 false는 논리 리터럴로 간주한다.
- 논리 리터럴을 저장할 수 있는 타입은 boolean 하나뿐이다. 

#### 변수값 읽기

- 변수는 초기화가 되어야 읽을 수가 있고, 초기화되지 않은 변수는 읽을 수가 없다. 



### 2-1-4. 변수의 사용 범위

- 변수는 중괄호 {} 블록 내에서 선언되고 사용된다. 중괄호 블록을 사용하는 곳은 클래스, 생성자, 메소드이다.
- 메소드 블록 내에서 선언된 변수를 특히 **로컬 변수(local variable)**라고 부른다. 
- 로컬 변수는 메소드 사용이 끝나면 메모리에서 자동으로 사라진다.
- 변수는 메소드 블록 내 어디에서든 선언할 수 있지만, **"변수는 선언된 블록 내에서만 사용이 가능하다"** 라는 제한이 따른다.
- 제어문 블록에서 선언된 변수는 해당 제어문 블록 내에서만 사용이 가능하고 블록 밖에서는 사용할 수 없다.



## 2-2. 데이터 타입

- 변수를 선언할 때 주어진 타입은 변수를 사용하는 도중에 변경할 수 없다. 

### 2-2-1. 기본(원시:primitive)타입

- 기본 타입이란 정수, 실수, 문자, 논리 리터럴을 직접 저장하는 타입을 말한다. 

### 2-2-2. 정수 타입(byte, char, short, int, long)

- byte=1, char=2, short=2, int=4, long=8
- 자바는 기본적으로 정수 연산을 int 타입으로 수행한다. 



#### Char 타입

- 자바는 모든 문자를 유니코드(Unicode)로 처리한다. 유니코드는 0~65535 범위의 2byte 크기를 가진 정수값이다.
- 자바는 하나의 유니코드를 저장하기 위해 2byte 크기인 char 타입을 제공한다. 
- 유니코드는 음수가 없기 때문에 char 타입의 변수에는 음수 값을 저장할 수 없다. 
- char 타입 변수에 작은 따옴표로 감싼 문자를 대입하면 해당 문자의 유니코드가 저장된다.  
- char 변수에 작은 따옴표로 감싼 문자가 아니라 직접 유니코드 정수값을 저장할 수도 있다. 

```java
char c = 65;
char c = '\u0041'  //   '\u+16진수값' -> 16진수로 저장할 때
```

- 프로그램 코드에서 char 변수에 저장된 유니코드를 알고 싶다면 char 타입 변수를 int 타입 변수에 저장하면 된다.

  ```java
  char c = 'A';
  int unicode = c;
  ```

- 만약 문자열을 저장하고 싶다면 String 타입을 사용해야 하는데, 다음과 같이 String 변수를 선언하고, 큰 따옴표로 감싼 문자열 리터럴을 대입하면 된다.

  ```java
  String name = "홍길동";
  ```

- String은 기본 타입이 아니다. **String은 클래스 타입이고 String 변수는 참조 변수이다.** 

- char 타입의 변수에 어떤 문자를 대입하지 않고 단순히 초기화를 할 목적으로 다음과 같이 작은 따옴표 두 개를 연달아 붙인 빈(empty) 문자를 대입하면 컴파일 에러가 발생한다. 그렇기 때문에 공백(유니코드:32)하나를 포함해서 초기화해야 한다.

  ```java
  char c = ''; //컴파일 에러. -> char c = ' ';
  ```

- 하지만 String 변수는 큰 따옴표 두 개를 연달아 붙인 빈 문자를 대입해도 괜찮다.

  ```java
  String str = "";
  ```

#### short 타입

- Short 타입은 2byte(16bit)로 표현되는 정수값을 저장할 수 있는 데이터 타입이다.

- C언어와의 호환을 위해 사용되며 비교적 자바에서는 **잘 사용되지 않는 타입**이다. 

#### int 타입

- int 타입은 4byte(32bit)로 표현되는 정수값을 저장할 수 있는 데이터 타입이다.

- int 타입은 자바에서 정수 연산을 하기 위한 **기본 타입**이다. 자바에서 정수 연산을 4 byte로 처리하기 때문이다. 

- 8진수일 경우 숫자 앞에 '0' 을 붙이면 되고, 16진수는 '0x'를 붙이면 된다. 

  ```java
  int number = 10;
  int octNumber = 012; // = 10
  int hexNumber = 0xA; // = 10
  ```

#### long 타입 

- long 타입은 8 byte(64bit)로 표현되는 정수값을 저장할 수 있는 데이터 타입이다. 
- 수치가 큰 데이터를 다루는 프로그램에서는 long 타입이 필수적으로 사용된다. 
- long 타입의 변수를 초기화할 때에는 정수값 뒤에 소문자 'l'이나 대문자 'L'을 붙일 수 있다. 이것은 4byte 정수 데이터가 아니라 8byte 정수 데이터임을 컴파일러에게 알려주기 위한 목적이다.
- int 타입의 저장 범위를 넘어서는 큰 정수는 반드시 소문자 'l'이나 대문자 'L'을 붙여야 한다. 그렇지 않으면 컴파일 에러가 난다.



### 2-2-3. 실수 타입(float, double)

- 실수 타입은 소수점이 있는 실수 데이터를 저장할 수 있는 타입으로, 메모리 사용 크기에 따라 float과 double이 있다.

- float = 4byte, double = 8byte

- float 과 double 의 메모리 사용 크기는 각각 int 와 long의 크기와 같지만, 정수 타입과는 다른 저장 방식 때문에 정수 타입보다 훨씬 더 큰 범위의 값을 저장할 수 있다. 

- float 보다는 double 이 **더 정밀한 값을 저장**할 수 있다. 자바는 실수 리터럴의 기본 타입을 double로 간주한다. 

- 실수 리터럴을 float 타입 변수에 저장하려면 리터럴 뒤에 소문자 'f'나 대문자 'F'를 붙여야 한다.

  ```java
  double var1 = 3.14;
  float var2 = 3.14;  //컴파일 에러
  float var3 = 3.14F;
  ```

- 만약 정수 리터럴에 10의 지수를 나타내는 E 또는 e를 포함하고 있으면 정수 타입 변수에 저장할 수 없고 실수 타입 변수에 저장해야 한다. 다음은 정수값 3000000을 저장하는 방법을 보여준다.

  ```java
  int var6 = 3000000;  //3000000
  double var7 = 3e6;   //3000000
  float var8 = 3e6f;   //3000000
  double var9 = 2e-3;  //0.002
  ```



### 2-2-4. 논리 타입(boolean)

- boolean 타입은 1byte(8bit)로 표현되는 논리값(true/false)을 저장할 수 있는 데이터 타입이다. 
- Boolean 타입은 두 가지 상태값을 저장할 필요성이 있을 경우에 사용되며, 상태값에 따라 조건문과 제어문의 실행 흐름을 변경하는데 주로 이용한다. 



## 2-3. 타입 변환

- 타입 변환이란 데이터 타입을 다른 데이터 타입으로 변환하는 것을 말한다. 
- 타입 변환에는 자동(묵시적)타입 변환과 강제(명시적)타입 변환이 있다.

### 2-3-1. 자동 타입 변환

- 자동 타입 변환은 프로그램 실행 도중에 자동적으로 타입 변환이 일어나는 것을 말한다. 
- 자동 타입 변환은 작은 크기를 가지는 타입이 큰 크기를 가지는 타입에 저장될 때 발생한다.

- 크기별로 타입을 정리하면 다음과 같다.

  ```java
  byte(1) < short(2) < int(4) < long(8) < float(4) < double(8)
  ```

  - float은 4byte 크기인데 int와 long보다 더 큰 타입으로 표시한 이유는 표현할 수 있는 값의 범위가 float이 더 크기 때문이다. 

  ```java
  int intValue = 200;
  double doubleValue = intValue; // =200.0
  ```

- char 타입의 경우 int 타입으로 자동 변환되면 유니코드 값이 int 타입에 저장된다.

  ```java
  char charValue = 'A';
  int intValue = charValue; // =65 가 저장
  ```

- 자동 타입 변환에서 단 하나의 예외가 있는데, char는 2byte의 크기를 가지지만, char의 범위는 0~65535이므로 음수가 저장될 수 없다. 따라서 **음수가 저장될 수 잇는 byte타입을 char타입으로 자동 변환시킬 수 없다.**

  ```java
  byte byteValue = 65;
  char charValue = byteValue; // (x) 컴파일 에러가 일어남
  char charDate = (char) byteData; //(o) 강제 타입 변환
  ```

### 2-3-2. 강제 타입 변환( 참조 부분에서 많이 사용함.)

- 큰 크기의 타입은 작은 크기의 타입으로 자동 타입 변환을 할 수 없다. 예를 들어, 4byte인 int타입을 1byte인 byte타입에 담을 수 없다. 

- int 타입을 4개의 byte로 쪼갠 다음, 끝에 있는 1byte만 byte 타입 변수에 저장하는 것은 가능하다. 

- 이와 같이 강제적으로 큰 데이터 타입을 작은 데이터 타입으로 쪼개어서 저자하는 것을 강제 타입 변환(캐스팅:casting) 이라고 한다. 강제 타입 변환은 캐스팅 연산자 ()를 사용하는데, 괄호 안에 들어가는 타입은 쪼개는 단위이다.

  ```java
  int intValue = 103029770;
  byte byteValue = (byte) intValue;   //강제 타입 변환(캐스팅)
  ```

  

- Long 타입 변수에 300이 저장되어 있을 경우, 8byte중 끝의 4byte로 300을 충분히 표현 할 수 있으므로 이것을 int 타입으로 강제 타입 변환하면 앞의 4byte는 버려지고 끝의 4byte만 int타입 변수에 저장되어 300이 그대로 유지된다.

```java
long longValue = 300;
int intValue = (int)longValue;  //longValue는 300이 그대로 저장된다.
```



- int 타입은 char 타입으로 자동 변환되지 않기 때문에 강제 타입 변환을 사용해야 한다. int 타입에 저장된 값이 유니코드 범위(0~65535) 라면 다음과 같이 (char) 캐스팅 연산자를 사용해서 char 타입으로 변환할 수 있다. char 타입으로 변환된 값을 출력하면 유니코드에 해당하는 문자가 출력된다.

  ```java
  int intValue = 'A';
  char charValue = (char) intValue;
  System.out.println(charValue);
  ```

- 실수 타입(float, double)은 정수 타입(byte, short, int, long)으로 자동 변환되지 않기 때문에 강제 타입 변환을 사용해야 한다. 이 경우 소수점 이하 부분은 버려지고, 정수 부분만 저장된다.

  ```java
  double doubleValue = 3.14;
  int intValue = (int) doubleValue;  //intValue는 정수 부분인 3만 저장된다.
  ```



- 강제 타입 변환에서 주의할 점은 사용자로부터 입력받은 값을 변환할 때 값의 손실이 발생하면 안된다는 것이다. 강제 타입 변환을 하기 전에 우선 안전하게 값이 보존될 수 있는지 검사하는 것이 좋다.
- 강제 타입 변환에서 또 다른 주의점이 있다. 정수 타입을 실수 타입으로 변환할 때 정밀도 손실을 피해야 한다. 



### 2-3-3. 연산식에서의 자동 타입 변환

- 연산은 기본적으로 같은 타입의 피연산자 간에만 수행되기 때문에 서로 다른 타입의 피연산자가 있을 경우 **두 피연산자 중 크기가 큰 타입으로 자동 변환된 후 연산을 수행**한다.

- 예를 들어 int 타입 피연산자와 double 타입 피연산자를 덧셈 연산하면 먼저 int 타입 피연산자가 double 타입으로 자동 변환되고 연산을 수행한다. 당연히 연산의 결과는 double이 된다. 

  ```java
  int intValue = 10;
  double doubleValue = 5.5;
  double result = intValue + doubleValue;  //result에 15.5가 저장 된다.
                 //intValue가 double 값으로 변환.
  ```

  - 만약 int 타입으로 꼭 연산을 해야 한다면 double 타입을 int 타입으로 강제 변환하고 덧셈 연산을 수행하면 된다.

    ```java
    int intValue = 10;
    double doubleValue = 5.5;
    int result = intValue + (int)doubleValue;  //result에 15가 저장
    ```

- 자바는 정수 연산일 경우 int 타입을 기본으로 한다. 그 이유는 피연산자를 4byte 단위로 저장하기 때문이다. 크기가 4byte보다 작은 타입(byte, char, short)은 4byte 인 int 타입으로 변환된 후 연산이 수행된다. 따라서 연산의 결과도 int 타입이 된다.

- 예를 들어 char 타입의 연산 결과는 int 타입으로 산출되므로 int 타입 변수에 결과를 저장해야 한다. 연산의 결과를 다시 문자로 출력하거나 저장하기 위해서는 int 결과값을 char 타입으로 강제 변환해야 한다.

  ```java
  char ai = 'A';
  int result = ai + 1;      //'A'의 유니코드보다 1이 큰 유니코드가 저장
  char na = (char)result;   //'B'가 저장됨
  ```

- 만약 피연산자 중 하나가 long 타입이라면 다른 피연산자도 long 타입으로 자동 타입 변환되고 연산의 결과는 long 타입이 된다.

- float 타입과 float 타입을 연산하면 연산의 결과는 float 타입으로 나오지만, 피연산자 중에 실수 리터럴이나 double 타입이 있다면 다른 피연산자도 double 타입으로 자동 타입 변환되어 연산되므로 결과는 double 타입으로 산출된다.

